# NarOS
#### 32位系统
#### 自制操作系统，主要是用来学习。
> 因为主要是学习用的，所以你可以向我提交小的BUG修复，但是提交功能的话，我可能不会通过 \
> 因为我还要拿来练手的（哈哈）
## 微内核
> 目前的设想是这样

## 架构
### boot
- boot 用于载入内核加载器
- load 读取内核写入内存并跳转至启动点
### pipe
- pipe_create 创建管道
- pipe_open 打开管道
- pipe_des 销毁管道
- pipe_close 关闭管道
- pipe_write 写入管道
### syscall
- syscall 用户调用系统调用
- __syscall 内核处理系统调用
- syscallList 系统调用表

> 系统调用必须使用fastcall调用协定！（这种方式不容易影响栈平衡）

## 目前的一些问题及解决方案
### boot
>- 默认是直接读入8M数据写入内存
>> 这个确实是方便写才这么做的，实际上我也想要根据实际大小写入，不过没那精力了
### io
>- 不安全，存在任意代码执行漏洞
>> 暂时不考虑安全，只要不是故意去实现，系统还是能稳定运行的
### syscall
>- 内联汇编过不了编译
>> 修好了，语法错误而已
>- 系统调用函数最大只能有2个参数
>> 根据32位下fastall的调用协定，第一第二参数分别传入ecx和edx，超过使用堆栈 \
>> 由于目前未对syscall做过测试，因此不能保证栈平衡，如果使用2个以上的参数可能会造成意外错误
